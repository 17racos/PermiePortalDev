<!DOCTYPE html>
<html lang="en">
  <head>
    <title>PermiePortal | Your Hub for Permaculture Knowledge</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <!-- Make sure JavaScript and CSS is properly loaded -->
    <%= stylesheet_link_tag "tailwind", "inter-font", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_include_tag "application", defer: true, "data-turbo-track": "reload" %>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="PermiePortal: Your central resource for permaculture education and community networking.">
  </head>
  
  <body style="background-color: #f0fff4; font-family: Arial, sans-serif; color: #333;">
    <div style="min-height: 100vh; display: flex; flex-direction: column;">

      <!-- Header Section -->
      <header style="background: linear-gradient(to right, #4CAF50, #388E3C); color: white; padding: 15px; text-align: center;">
        <div style="max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center;">
          <!-- Logo -->
          <h1 style="font-size: 1.5rem; font-weight: bold;">
            <%= link_to 'PermiePortal', root_path, style: "color: white; text-decoration: none;" %>
          </h1>

          <!-- Navigation -->
          <nav style="font-size: 0.9rem;">
            <% if user_signed_in? %>
              <span>Welcome, <%= current_user.email %>!</span>
              <%= link_to 'Logout', destroy_user_session_path, method: :delete, style: "color: white; margin-left: 15px; text-decoration: none;" %>
            <% else %>
              <%= link_to 'Login', new_user_session_path, style: "color: white; margin-right: 15px; text-decoration: none;" %>
              <%= link_to 'Sign Up', new_user_registration_path, style: "color: white; text-decoration: none;" %>
            <% end %>
          </nav>
        </div>
      </header>

      <!-- Main Content -->
      <main style="flex-grow: 1; max-width: 1200px; margin: 40px auto; padding: 20px;">
        <div style="display: flex; flex-direction: column; min-height: 100vh;">
          <!-- Yield to content in individual views -->
          <%= yield %>
        </div>
      </main>

      <!-- Footer -->
      <footer style="background: #333; color: white; text-align: center; padding: 20px;">
        <p style="font-size: 0.9rem; color: #ccc;">
          &copy; <%= Time.current.year %> PermiePortal. All rights reserved.
        </p>
        <p style="margin-top: 5px;">
          Explore more at:
          <a href="https://permaculture.org" target="_blank" style="color: #4CAF50; text-decoration: none;">Permaculture.org</a>
        </p>
      </footer>

    </div>
  </body>
</html>
